################################################################################
# MANGOWC CONFIGURATION
# Ported from Hyprland setup - Arch + MangoWC dotfiles
################################################################################

################################################################################
# MONITOR CONFIGURATION
################################################################################

# MangoWC monitor format: name,mfact,nmaster,layout,transform,scale,x,y,width,height,refreshrate
# Laptop (left) - 1920x1200 @ 60Hz at position (0,0)
monitorrule=eDP-1,0.55,1,scroller,0,1,0,0,1920,1200,60
# External 1 landscape (middle) - 1920x1080 @ 60Hz at position (1920,0)
monitorrule=HDMI-A-1,0.55,1,scroller,0,1,1920,0,1920,1080,60
# External 2 portrait (right) - 1920x1080 @ 60Hz rotated 90Â° at position (3840,0)
monitorrule=DP-3,0.55,1,scroller,3,1,3840,0,1080,1920,60

################################################################################
# APPEARANCE & EFFECTS
################################################################################

# Blur effects (SceneFX)
blur=1
blur_layer=1
blur_optimized=1
blur_params_num_passes=2
blur_params_radius=8
blur_params_noise=0.02
blur_params_brightness=0.95
blur_params_contrast=0.9
blur_params_saturation=1.1

# Shadow effects (SceneFX)
shadows=1                    # Enable/disable shadows (0=off, 1=on)
layer_shadows=1              # Shadows on panels/bars (0=off, 1=on)
shadow_only_floating=0       # Only floating windows get shadows (0=all, 1=floating only)
shadows_size=12              # Shadow spread/size in pixels (smaller = tighter shadow)
shadows_blur=20              # Shadow blur amount (higher = softer/more diffuse)
shadows_position_x=0         # Horizontal offset in pixels (negative=left, positive=right)
shadows_position_y=3         # Vertical offset in pixels (negative=up, positive=down)
shadowscolor=0x00000066      # Shadow color in 0xRRGGBBAA format (last 2 digits = opacity)

# Border and radius
border_radius=12
no_radius_when_single=0
borderpx=2

# Global opacity (applies to ALL windows)
focused_opacity=0.85
unfocused_opacity=0.5

# Colors (Catppuccin Macchiato - Official Palette)
# Note: MangoWC expects hex format: 0xRRGGBBAA (with alpha channel)

# Base window color (Crust - darkest background)
rootcolor=0x181926ff

# Window borders
# Overlay0 - default border (inactive)
bordercolor=0x6e738dff
# Mauve - focused window border accent
focuscolor=0xc6a0f6ff

# Special window states
# Red - urgent/warning windows
urgentcolor=0xed8796ff
# Green - maximized windows
maximizescreencolor=0xa6da95ff
# Blue - scratchpad windows
scratchpadcolor=0x8aadf4ff
# Pink - global windows
globalcolor=0xf5bde6ff
# Teal - overlay windows
overlaycolor=0x8bd5caff

# Catppuccin Macchiato palette reference:
# Accent colors:
#   Rosewater: 0xf4dbd6ff, Flamingo: 0xf0c6c6ff, Pink: 0xf5bde6ff, Mauve: 0xc6a0f6ff
#   Red: 0xed8796ff, Maroon: 0xee99a0ff, Peach: 0xf5a97fff, Yellow: 0xeed49fff
#   Green: 0xa6da95ff, Teal: 0x8bd5caff, Sky: 0x91d7e3ff, Sapphire: 0x7dc4e4ff
#   Blue: 0x8aadf4ff, Lavender: 0xb7bdf8ff
# Monochrome:
#   Text: 0xcad3f5ff, Subtext1: 0xb8c0e0ff, Subtext0: 0xa5adcbff
#   Overlay2: 0x939ab7ff, Overlay1: 0x8087a2ff, Overlay0: 0x6e738dff
#   Surface2: 0x5b6078ff, Surface1: 0x494d64ff, Surface0: 0x363a4fff
#   Base: 0x24273aff, Mantle: 0x1e2030ff, Crust: 0x181926ff

################################################################################
# ANIMATIONS
################################################################################

animations=1
layer_animations=1

# Window open animation
animation_type_open=zoom
animation_duration_open=400
animation_curve_open=0.05,0.9,0.1,1.05
zoom_initial_ratio=0.5
animation_fade_in=1
fadein_begin_opacity=0.0

# Window close animation
animation_type_close=zoom
animation_duration_close=300
animation_curve_close=0.05,0.9,0.1,1.05
zoom_end_ratio=0.7
animation_fade_out=1
fadeout_begin_opacity=1.0

# Window move animation
animation_type_move=slide
animation_duration_move=300
animation_curve_move=0.05,0.9,0.1,1.05

# Tag/workspace switch animations
animation_type_tag_enter=slide
animation_duration_tag_enter=350
animation_curve_tag_enter=0.05,0.9,0.1,1.05

animation_type_tag_leave=slide
animation_duration_tag_leave=350
animation_curve_tag_leave=0.05,0.9,0.1,1.05

tag_animation_direction=0

# Focus change fade (0ms = instant, set higher for smooth fade)
animation_duration_focus=200
animation_curve_focus=0.46,1.0,0.29,1
animation_fade_on_focus_change=1

################################################################################
# LAYOUT CONFIGURATION
################################################################################

# Gap settings
# Inner horizontal gap
gappih=8
# Inner vertical gap
gappiv=8
# Outer horizontal gap
gappoh=12
# Outer vertical gap
gappov=12

# Scratchpad size ratios (floating terminal overlay)
scratchpad_width_ratio=0.75
scratchpad_height_ratio=0.85

# Default layout (scroller for the scrolling effect you want!)
default_layout=scroller

# Scroller layout settings (this is what you wanted from Mango!)
# Windows take 90% of screen
scroller_default_proportion=0.9
# Gap between scrolling windows
scroller_window_gap=10

# Master-stack layout settings
# Master window takes 55% of screen
default_mfact=0.55
# Number of windows in master area
default_master_num=1

# Available layouts (you can switch between these):
# - tile: Master-stack tiling (like Hyprland master)
# - scroller: Horizontal scrolling windows (like Niri!)
# - vertical_scroller: Vertical scrolling windows
# - monocle: One window fullscreen
# - grid: Grid layout (closest to dwindle auto-tiling)
# - deck: Master with stacked secondary windows
# - center_tile: Centered master window
# - vertical_spiral: Spiral pattern
# - vertical_tile: Vertical master-stack

################################################################################
# INPUT CONFIGURATION
################################################################################

# Keyboard
repeat_rate=25
repeat_delay=600

# Keyboard layouts (US and FR with Alt+Shift to switch)
xkb_rules_layout=fr,us
xkb_rules_variant=,
xkb_rules_options=grp:alt_shift_toggle

# Touchpad
tap_to_click=1
trackpad_natural_scrolling=1
drag_lock=1
scroll_method=1
disable_while_typing=1

# Mouse
cursor_size=24

################################################################################
# KEYBINDINGS
################################################################################

# Note: MangoWC uses tags (like dwm) not workspaces
# Tags are more flexible - windows can be on multiple tags at once

# System controls
# Reload config
bind=SUPER+SHIFT,r,reload_config

# Application launchers
# Terminal
binds=SUPER,q,spawn,kitty
# App launcher
binds=SUPER,r,spawn,rofi -show drun
# Browser
binds=SUPER,b,spawn,zen-browser
# VSCode (Editor)
binds=SUPER,e,spawn,code
# Notes
binds=SUPER,n,spawn,obsidian
# File Explorer (Directory)
binds=SUPER,d,spawn,thunar

# Window controls
# Close window
binds=SUPER,c,killclient,
# Exit MangoWC
binds=SUPER,m,quit,
# Fullscreen
binds=SUPER,f,togglefullscreen,
# Toggle floating
binds=SUPER+SHIFT,space,togglefloating,
# Toggle split direction
binds=SUPER,t,togglesplit,

# Lock screen (will use swaylock instead of hyprlock)
binds=SUPER,l,spawn,swaylock

# Show keybinds
binds=SUPER,k,spawn,~/Projects/archeotech-dotfiles/scripts/show-keybinds.sh

# Scratchpad (floating overlay terminal)
bind=SUPER,grave,toggle_scratchpad,

# Focus movement (arrow keys)
bind=SUPER,Left,focusdir,left
bind=SUPER,Right,focusdir,right
bind=SUPER,Up,focusdir,up
bind=SUPER,Down,focusdir,down

# Move/swap windows in tiling (arrow keys)
bind=SUPER+SHIFT,Left,exchange_client,left
bind=SUPER+SHIFT,Right,exchange_client,right
bind=SUPER+SHIFT,Up,exchange_client,up
bind=SUPER+SHIFT,Down,exchange_client,down

# Move window to other monitors
# tagmon moves window to adjacent monitor (keeptag 0 = don't keep tag)
bind=SUPER+CTRL+SHIFT,Left,tagmon,left,0
bind=SUPER+CTRL+SHIFT,Right,tagmon,right,0
bind=SUPER+CTRL+SHIFT,Up,tagmon,up,0
bind=SUPER+CTRL+SHIFT,Down,tagmon,down,0

# Focus other monitors
bind=SUPER+CTRL,comma,focusmon,left
bind=SUPER+CTRL,period,focusmon,right

# Resize floating windows (arrow keys)
bind=SUPER+CTRL,Left,resizewin,-20,0
bind=SUPER+CTRL,Right,resizewin,20,0
bind=SUPER+CTRL,Up,resizewin,0,-20
bind=SUPER+CTRL,Down,resizewin,0,20

# Tag switching (tags 1-9 - empty tags hidden in waybar)
bind=SUPER,1,view,1
bind=SUPER,2,view,2
bind=SUPER,3,view,3
bind=SUPER,4,view,4
bind=SUPER,5,view,5
bind=SUPER,6,view,6
bind=SUPER,7,view,7
bind=SUPER,8,view,8
bind=SUPER,9,view,9

# Move window to tag
bind=SUPER+SHIFT,1,tag,1
bind=SUPER+SHIFT,2,tag,2
bind=SUPER+SHIFT,3,tag,3
bind=SUPER+SHIFT,4,tag,4
bind=SUPER+SHIFT,5,tag,5
bind=SUPER+SHIFT,6,tag,6
bind=SUPER+SHIFT,7,tag,7
bind=SUPER+SHIFT,8,tag,8
bind=SUPER+SHIFT,9,tag,9

# Tag navigation (next/previous)
bind=SUPER,Tab,viewnext,
bind=SUPER+SHIFT,Tab,viewprev,

# Layout switching
# Switch to scroller (horizontal scrolling!)
bind=SUPER,space,setlayout,scroller
# Switch to tile (master-stack, like Hyprland master)
bind=SUPER+ALT,space,setlayout,tile
# Switch to grid (auto-tiling, closest to dwindle)
binds=SUPER+ALT,g,setlayout,grid
# Switch to monocle (fullscreen)
binds=SUPER+ALT,m,setlayout,monocle
# Switch to vertical scroller
binds=SUPER+ALT,v,setlayout,vertical_scroller
# Switch to deck (master + stacked)
binds=SUPER+ALT,d,setlayout,deck
# Switch to spiral (alternative tiling)
binds=SUPER+ALT,s,setlayout,vertical_spiral

# Gap adjustment
# Increase gaps
bind=SUPER,equal,incgaps,5
# Decrease gaps
bind=SUPER,minus,decgaps,5
# Toggle gaps on/off
bind=SUPER,0,togglegaps,

# Screenshots
binds=SUPER,s,spawn_shell,grim -g "$(slurp)" - | tee ~/Pictures/Screenshots/$(date +%Y%m%d_%H%M%S).png | wl-copy
binds=SUPER,p,spawn_shell,grim - | tee ~/Pictures/Screenshots/$(date +%Y%m%d_%H%M%S).png | wl-copy
bind=NONE,Print,spawn_shell,grim - | tee ~/Pictures/Screenshots/$(date +%Y%m%d_%H%M%S).png | wl-copy

# Clipboard history
binds=SUPER,v,spawn_shell,cliphist list | rofi -dmenu | cliphist decode | wl-copy

# Audio controls (media keys)
bind=NONE,XF86AudioRaiseVolume,spawn,wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bind=NONE,XF86AudioLowerVolume,spawn,wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bind=NONE,XF86AudioMute,spawn,wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind=NONE,XF86AudioMicMute,spawn,wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Brightness controls (media keys)
bind=NONE,XF86MonBrightnessUp,spawn,brightnessctl set 5%+
bind=NONE,XF86MonBrightnessDown,spawn,brightnessctl set 5%-

# Media controls (media keys)
bind=NONE,XF86AudioPlay,spawn,playerctl play-pause
bind=NONE,XF86AudioNext,spawn,playerctl next
bind=NONE,XF86AudioPrev,spawn,playerctl previous

################################################################################
# MOUSE BINDINGS
################################################################################

# Move window with Super + Left Click
mousebind=SUPER,btn_left,moveresize,curmove
# Resize window with Super + Right Click
mousebind=SUPER,btn_right,moveresize,curresize

################################################################################
# TOUCHPAD GESTURES
################################################################################

# 3-finger swipe - Navigate between windows in the current tag
# Natural direction: swipe left to focus window on the right (push current window left)
gesturebind=NONE,left,3,focusdir,right
# Swipe right to focus window on the left (push current window right)
gesturebind=NONE,right,3,focusdir,left
# Swipe up to focus window below (push current window up)
gesturebind=NONE,up,3,focusdir,down
# Swipe down to focus window above (push current window down)
gesturebind=NONE,down,3,focusdir,up

# 4-finger swipe - Switch between tags (workspaces)
# Natural direction: swipe left to go to next tag (push current view left)
gesturebind=NONE,left,4,viewtoright
# Swipe right to go to previous tag (push current view right)
gesturebind=NONE,right,4,viewtoleft
# Swipe up to toggle workspace overview
gesturebind=NONE,up,4,toggleoverview
# Swipe down to toggle workspace overview
gesturebind=NONE,down,4,toggleoverview

################################################################################
# WINDOW RULES
################################################################################

# Float specific windows
windowrule=isfloating:1,appid:pavucontrol
windowrule=isfloating:1,appid:blueman-manager
windowrule=isfloating:1,appid:nm-connection-editor
windowrule=isfloating:1,title:Picture-in-Picture

# Size rules for floating windows
windowrule=width:800,height:600,appid:pavucontrol

# Opacity rules - Per-window opacity control
# Note: MangoWC only supports boolean focused_opacity/unfocused_opacity in windowrules
# (0=use global opacity, 1=force opaque). Use noblur to disable blur per-window.
# For now, we'll use global opacity settings and blur control for effect.

# Disable blur on windows that need maximum clarity
windowrule=noblur:1,appid:zen-alpha
windowrule=noblur:1,appid:firefox
windowrule=noblur:1,appid:chromium

################################################################################
# AUTOSTART
################################################################################

# These will be in autostart.sh instead (see autostart.sh file)
# - waybar
# - dunst
# - nm-applet
# - blueman-applet
# - swww
# - clipboard manager
# - idle manager

################################################################################
# MISC SETTINGS
################################################################################

# Keyboard layout switching (US/FR with Alt+Shift)
# Note: This might need to be configured via environment or startup script
# For now, we'll handle it in autostart.sh
